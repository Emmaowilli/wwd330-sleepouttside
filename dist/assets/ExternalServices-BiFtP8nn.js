const r="";function n(i){if(i.ok)return i.json();throw new Error("Bad Response")}class d{constructor(e=!1){this.mockMode=e}async getData(e){if(this.mockMode){const t=await fetch(`/json/${e}.json`);return await n(t)}else{const t=await fetch(`${r}products/search/${e}`);return(await n(t)).Result}}async searchProducts(e){if(this.mockMode){const t=["tents","sleeping-bags","backpacks","hammocks"];let o=[];for(const s of t)try{const a=await this.getData(s);Array.isArray(a)&&(o=o.concat(a))}catch(a){console.warn(`Could not load ${s}.json`,a)}const c=e.toLowerCase();return o.filter(s=>(s.Name||"").toLowerCase().includes(c)||(s.NameWithoutBrand||"").toLowerCase().includes(c))}else{const t=await fetch(`${r}products/search/${encodeURIComponent(e)}`);return(await n(t)).Result}}async findProductById(e){if(this.mockMode){const t=["tents","sleeping-bags","backpacks","hammocks"];for(const o of t)try{const s=(await this.getData(o)).find(a=>String(a.Id)===String(e));if(s)return s}catch{}return null}else{const t=await fetch(`${r}product/${e}`);return(await n(t)).Result}}async checkout(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return await fetch(`${r}checkout/`,t).then(n)}}export{d as E};
